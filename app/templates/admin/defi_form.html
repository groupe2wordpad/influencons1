{% extends 'admin/base.html' %}
{% block page_title %}{% if item %}Modifier le d√©fi{% else %}Nouveau d√©fi{% endif %}{% endblock %}
{% block topbar_actions %}<a href="{{ url_for('admin.defis') }}" class="btn btn-ghost">‚Üê Retour</a>{% endblock %}
{% block content %}
<div class="form-card">
  <form method="POST">
    <div class="form-group">
      <label>Titre du d√©fi *</label>
      <input type="text" name="title" value="{{ item.title if item else '' }}" required placeholder="7 jours pour influencer autrement...">
    </div>
    <div class="form-group">
      <label>Description</label>
      <textarea name="description" rows="4" placeholder="D√©crivez le d√©fi...">{{ item.description if item else '' }}</textarea>
    </div>
    <p style="font-size:0.8rem; color:var(--text-muted); margin-bottom:16px; text-transform:uppercase; letter-spacing:0.1em;">‚ú¶ Les 3 √©tapes du d√©fi</p>
    <div class="form-grid">
      <div class="form-group">
        <label>√âtape 1 ‚Äî Titre</label>
        <input type="text" name="step1_title" value="{{ item.step1_title if item else '' }}" placeholder="Identifier">
      </div>
      <div class="form-group">
        <label>√âtape 1 ‚Äî Description</label>
        <input type="text" name="step1_desc" value="{{ item.step1_desc if item else '' }}" placeholder="Une personne autour de vous...">
      </div>
      <div class="form-group">
        <label>√âtape 2 ‚Äî Titre</label>
        <input type="text" name="step2_title" value="{{ item.step2_title if item else '' }}" placeholder="Agir">
      </div>
      <div class="form-group">
        <label>√âtape 2 ‚Äî Description</label>
        <input type="text" name="step2_desc" value="{{ item.step2_desc if item else '' }}" placeholder="Un geste concret chaque jour...">
      </div>
      <div class="form-group">
        <label>√âtape 3 ‚Äî Titre</label>
        <input type="text" name="step3_title" value="{{ item.step3_title if item else '' }}" placeholder="T√©moigner">
      </div>
      <div class="form-group">
        <label>√âtape 3 ‚Äî Description</label>
        <input type="text" name="step3_desc" value="{{ item.step3_desc if item else '' }}" placeholder="Partager votre exp√©rience...">
      </div>
    </div>
    <div class="form-group">
      <div class="checkbox-wrap">
        <input type="checkbox" name="is_active" id="active" {% if not item or item.is_active %}checked{% endif %}>
        <label for="active">D√©fi actif (affich√© sur le site)</label>
      </div>
    </div>
    <div style="display:flex; gap:12px;">
      <button type="submit" class="btn btn-gold">{% if item %}üíæ Enregistrer{% else %}‚ú¶ Cr√©er le d√©fi{% endif %}</button>
      <a href="{{ url_for('admin.defis') }}" class="btn btn-ghost">Annuler</a>
    </div>
  </form>
</div>
{% endblock %}
